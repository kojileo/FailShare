rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // ğŸš¨ é–‹ç™ºç’°å¢ƒç”¨ã®ç·©ã„ãƒ«ãƒ¼ãƒ«ï¼ˆä¸€æ™‚çš„ï¼‰
    
    // åŒ¿åãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
    match /anonymousUsers/{userId} {
      allow read, write: if request.auth != null;
    }
    
    // æŠ•ç¨¿ã•ã‚ŒãŸå¤±æ•—è«‡
    match /stories/{storyId} {
      allow read, write: if request.auth != null;
    }
    
    // ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½
    match /stories/{storyId}/comments/{commentId} {
      allow read, write: if request.auth != null;
    }
    
    // é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿
    match /dev_tests/{document} {
      allow read, write: if request.auth != null;
    }
    
    match /staging_tests/{document} {
      allow read, write: if request.auth != null;
    }
    
    // ä»–ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æ‹’å¦
    match /{document=**} {
      allow read, write: if false;
    }
  }
} 